<?xml version="1.0"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>Twisted Documentation: userInput.py source listing</title><link href="py4fun.css" type="text/css" rel="stylesheet" /></head><body bgcolor="white"><h1 class="title">userInput.py source listing</h1><div class="toc"><ol></ol></div><div class="content"><span></span><pre class="python">
<span class="py-src-comment">#!/usr/local/bin/python
</span><span class="py-src-comment">#
</span><span class="py-src-comment">#  u s e r I n p u t . p y
</span><span class="py-src-comment">#
</span><span class="py-src-comment">#  Copyright 2001 by Chris Meyers. 
</span><span class="py-src-comment">#
</span><span class="py-src-comment">#  General class to input string. Support of indirect files and ability to
</span><span class="py-src-comment">#  comment input. 
</span><span class="py-src-comment">#
</span><span class="py-src-keyword">import</span> <span class="py-src-variable">sys</span><span class="py-src-op">,</span> <span class="py-src-variable">string</span><span class="py-src-newline">
</span><span class="py-src-nl">
</span><span class="py-src-keyword">class</span> <span class="py-src-identifier">InputString</span> <span class="py-src-op">:</span><span class="py-src-newline">
</span>    <span class="py-src-comment"># class variable. used by all instances. Currently open @files
</span><span class="py-src-indent">    </span><span class="py-src-variable">filStack</span> <span class="py-src-op">=</span> <span class="py-src-op">[</span><span class="py-src-op">]</span><span class="py-src-newline">
</span><span class="py-src-nl">
</span>    <span class="py-src-keyword">def</span> <span class="py-src-identifier">__init__</span> <span class="py-src-op">(</span><span class="py-src-parameter">self</span><span class="py-src-op">,</span> <span class="py-src-parameter">Echo</span><span class="py-src-op">=</span><span class="py-src-number">0</span><span class="py-src-op">)</span> <span class="py-src-op">:</span><span class="py-src-newline">
</span>        <span class="py-src-comment"># if true echo prompts and inputs from @files to screen
</span><span class="py-src-indent">        </span><span class="py-src-variable">self</span><span class="py-src-op">.</span><span class="py-src-variable">echo</span> <span class="py-src-op">=</span> <span class="py-src-variable">Echo</span><span class="py-src-newline">
</span>        <span class="py-src-keyword">return</span><span class="py-src-newline">
</span><span class="py-src-nl">
</span>    <span class="py-src-dedent"></span><span class="py-src-keyword">def</span> <span class="py-src-identifier">get</span> <span class="py-src-op">(</span><span class="py-src-parameter">self</span><span class="py-src-op">,</span> <span class="py-src-parameter">prompt</span><span class="py-src-op">)</span> <span class="py-src-op">:</span><span class="py-src-newline">
</span><span class="py-src-indent">        </span><span class="py-src-keyword">while</span> <span class="py-src-number">1</span> <span class="py-src-op">:</span><span class="py-src-newline">
</span>            <span class="py-src-comment"># If inside an indirect file
</span><span class="py-src-indent">            </span><span class="py-src-keyword">if</span> <span class="py-src-variable">self</span><span class="py-src-op">.</span><span class="py-src-variable">filStack</span> <span class="py-src-op">:</span><span class="py-src-newline">
</span>                <span class="py-src-comment"># get next line out of file
</span><span class="py-src-indent">                </span><span class="py-src-variable">lin</span> <span class="py-src-op">=</span> <span class="py-src-variable">self</span><span class="py-src-op">.</span><span class="py-src-variable">filStack</span><span class="py-src-op">[</span><span class="py-src-op">-</span><span class="py-src-number">1</span><span class="py-src-op">]</span><span class="py-src-op">.</span><span class="py-src-variable">readline</span><span class="py-src-op">(</span><span class="py-src-op">)</span><span class="py-src-newline">
</span>                <span class="py-src-comment"># Oops. If at the end
</span>                <span class="py-src-keyword">if</span> <span class="py-src-variable">lin</span> <span class="py-src-op">==</span> <span class="py-src-string">&quot;&quot;</span> <span class="py-src-op">:</span><span class="py-src-newline">
</span>                    <span class="py-src-comment"># close and pop file off the stack
</span><span class="py-src-indent">                    </span><span class="py-src-variable">self</span><span class="py-src-op">.</span><span class="py-src-variable">filStack</span><span class="py-src-op">[</span><span class="py-src-op">-</span><span class="py-src-number">1</span><span class="py-src-op">]</span><span class="py-src-op">.</span><span class="py-src-variable">close</span><span class="py-src-op">(</span><span class="py-src-op">)</span><span class="py-src-newline">
</span>                    <span class="py-src-variable">self</span><span class="py-src-op">.</span><span class="py-src-variable">filStack</span> <span class="py-src-op">=</span> <span class="py-src-variable">self</span><span class="py-src-op">.</span><span class="py-src-variable">filStack</span><span class="py-src-op">[</span><span class="py-src-number">0</span><span class="py-src-op">:</span><span class="py-src-op">-</span><span class="py-src-number">1</span><span class="py-src-op">]</span> <span class="py-src-newline">
</span>                    <span class="py-src-comment"># go again to get user some input!
</span>                    <span class="py-src-keyword">continue</span><span class="py-src-newline">
</span>                <span class="py-src-comment"># Otherwise echo, if user wants that
</span>                <span class="py-src-dedent"></span><span class="py-src-keyword">if</span> <span class="py-src-variable">self</span><span class="py-src-op">.</span><span class="py-src-variable">echo</span> <span class="py-src-op">:</span> <span class="py-src-keyword">print</span> <span class="py-src-variable">prompt</span><span class="py-src-op">,</span> <span class="py-src-variable">lin</span><span class="py-src-op">,</span><span class="py-src-newline">
</span>            <span class="py-src-comment"># No more indirect files. Go to user
</span>            <span class="py-src-dedent"></span><span class="py-src-keyword">else</span> <span class="py-src-op">:</span><span class="py-src-newline">
</span>                <span class="py-src-comment"># User herself types the line in
</span><span class="py-src-indent">                </span><span class="py-src-keyword">try</span>   <span class="py-src-op">:</span> <span class="py-src-variable">lin</span> <span class="py-src-op">=</span> <span class="py-src-variable">raw_input</span><span class="py-src-op">(</span><span class="py-src-variable">prompt</span><span class="py-src-op">)</span><span class="py-src-op">+</span><span class="py-src-string">&quot;\n&quot;</span><span class="py-src-newline">
</span>                <span class="py-src-comment"># quick end if user gives end of file
</span>                <span class="py-src-keyword">except</span><span class="py-src-op">:</span> <span class="py-src-keyword">return</span> <span class="py-src-string">&quot;&quot;</span><span class="py-src-newline">
</span>            <span class="py-src-comment"># A comment skip this. get real input!
</span>            <span class="py-src-dedent"></span><span class="py-src-keyword">if</span> <span class="py-src-variable">lin</span><span class="py-src-op">[</span><span class="py-src-number">0</span><span class="py-src-op">]</span> <span class="py-src-op">==</span> <span class="py-src-string">'#'</span> <span class="py-src-op">:</span> <span class="py-src-keyword">continue</span><span class="py-src-newline">
</span>            <span class="py-src-comment"># invoking indirect file?
</span>            <span class="py-src-keyword">elif</span> <span class="py-src-variable">lin</span><span class="py-src-op">[</span><span class="py-src-number">0</span><span class="py-src-op">]</span> <span class="py-src-op">==</span> <span class="py-src-string">'@'</span> <span class="py-src-op">:</span><span class="py-src-newline">
</span>                <span class="py-src-comment"># open it for reading
</span><span class="py-src-indent">                </span><span class="py-src-variable">fil</span> <span class="py-src-op">=</span> <span class="py-src-variable">open</span> <span class="py-src-op">(</span><span class="py-src-variable">lin</span><span class="py-src-op">[</span><span class="py-src-number">1</span><span class="py-src-op">:</span><span class="py-src-op">-</span><span class="py-src-number">1</span><span class="py-src-op">]</span><span class="py-src-op">)</span><span class="py-src-newline">
</span>                <span class="py-src-comment"># push it on the stack
</span>                <span class="py-src-variable">self</span><span class="py-src-op">.</span><span class="py-src-variable">filStack</span><span class="py-src-op">.</span><span class="py-src-variable">append</span><span class="py-src-op">(</span><span class="py-src-variable">fil</span><span class="py-src-op">)</span><span class="py-src-newline">
</span>                <span class="py-src-comment"># go get the user some input!
</span>                <span class="py-src-keyword">continue</span><span class="py-src-newline">
</span>            <span class="py-src-comment"># finally. Real input
</span>            <span class="py-src-dedent"></span><span class="py-src-keyword">else</span> <span class="py-src-op">:</span> <span class="py-src-keyword">return</span> <span class="py-src-variable">lin</span><span class="py-src-newline">
</span><span class="py-src-nl">
</span><span class="py-src-dedent"></span><span class="py-src-dedent"></span><span class="py-src-dedent"></span><span class="py-src-keyword">class</span> <span class="py-src-identifier">InputWord</span> <span class="py-src-op">(</span><span class="py-src-parameter">InputString</span><span class="py-src-op">)</span> <span class="py-src-op">:</span><span class="py-src-newline">
</span><span class="py-src-indent">    </span><span class="py-src-keyword">def</span> <span class="py-src-identifier">__init__</span> <span class="py-src-op">(</span><span class="py-src-parameter">self</span><span class="py-src-op">,</span> <span class="py-src-parameter">Echo</span><span class="py-src-op">=</span><span class="py-src-number">0</span><span class="py-src-op">)</span> <span class="py-src-op">:</span><span class="py-src-newline">
</span><span class="py-src-indent">        </span><span class="py-src-variable">InputString</span><span class="py-src-op">.</span><span class="py-src-variable">__init__</span> <span class="py-src-op">(</span><span class="py-src-variable">self</span><span class="py-src-op">,</span> <span class="py-src-variable">Echo</span><span class="py-src-op">)</span><span class="py-src-newline">
</span>        <span class="py-src-variable">self</span><span class="py-src-op">.</span><span class="py-src-variable">words</span> <span class="py-src-op">=</span> <span class="py-src-op">[</span><span class="py-src-op">]</span><span class="py-src-newline">
</span><span class="py-src-nl">
</span>    <span class="py-src-dedent"></span><span class="py-src-keyword">def</span> <span class="py-src-identifier">get</span> <span class="py-src-op">(</span><span class="py-src-parameter">self</span><span class="py-src-op">,</span> <span class="py-src-parameter">prompt</span><span class="py-src-op">)</span> <span class="py-src-op">:</span><span class="py-src-newline">
</span><span class="py-src-indent">        </span><span class="py-src-keyword">while</span> <span class="py-src-number">1</span> <span class="py-src-op">:</span><span class="py-src-newline">
</span><span class="py-src-indent">            </span><span class="py-src-keyword">if</span> <span class="py-src-variable">self</span><span class="py-src-op">.</span><span class="py-src-variable">words</span> <span class="py-src-op">:</span>                    <span class="py-src-comment"># leftovers from earlier read ?</span><span class="py-src-newline">
</span><span class="py-src-indent">                </span><span class="py-src-variable">word</span> <span class="py-src-op">=</span> <span class="py-src-variable">self</span><span class="py-src-op">.</span><span class="py-src-variable">words</span><span class="py-src-op">[</span><span class="py-src-number">0</span><span class="py-src-op">]</span>           <span class="py-src-comment"># I'll return this one</span><span class="py-src-newline">
</span>                <span class="py-src-variable">self</span><span class="py-src-op">.</span><span class="py-src-variable">words</span> <span class="py-src-op">=</span> <span class="py-src-variable">self</span><span class="py-src-op">.</span><span class="py-src-variable">words</span><span class="py-src-op">[</span><span class="py-src-number">1</span><span class="py-src-op">:</span><span class="py-src-op">]</span>    <span class="py-src-comment"># clip 1st off the list</span><span class="py-src-newline">
</span>                <span class="py-src-keyword">return</span> <span class="py-src-variable">word</span>                    <span class="py-src-comment"># and return it</span><span class="py-src-newline">
</span>            <span class="py-src-dedent"></span><span class="py-src-variable">lin</span> <span class="py-src-op">=</span> <span class="py-src-variable">InputString</span><span class="py-src-op">.</span><span class="py-src-variable">get</span><span class="py-src-op">(</span><span class="py-src-variable">self</span><span class="py-src-op">,</span><span class="py-src-variable">prompt</span><span class="py-src-op">)</span> <span class="py-src-comment"># go get a line from where ever</span><span class="py-src-newline">
</span>            <span class="py-src-keyword">if</span> <span class="py-src-variable">lin</span> <span class="py-src-op">==</span> <span class="py-src-string">&quot;&quot;</span> <span class="py-src-op">:</span> <span class="py-src-keyword">return</span> <span class="py-src-string">&quot;&quot;</span>           <span class="py-src-comment"># end of file. thats a return</span><span class="py-src-newline">
</span>            <span class="py-src-variable">self</span><span class="py-src-op">.</span><span class="py-src-variable">words</span> <span class="py-src-op">=</span> <span class="py-src-variable">string</span><span class="py-src-op">.</span><span class="py-src-variable">split</span><span class="py-src-op">(</span><span class="py-src-variable">lin</span><span class="py-src-op">)</span>     <span class="py-src-comment"># split up line into words</span><span class="py-src-newline">
</span><span class="py-src-nl">
</span><span class="py-src-dedent"></span><span class="py-src-dedent"></span><span class="py-src-dedent"></span><span class="py-src-keyword">class</span> <span class="py-src-identifier">InputNumber</span> <span class="py-src-op">(</span><span class="py-src-parameter">InputWord</span><span class="py-src-op">)</span> <span class="py-src-op">:</span><span class="py-src-newline">
</span><span class="py-src-indent">    </span><span class="py-src-keyword">def</span> <span class="py-src-identifier">__init__</span> <span class="py-src-op">(</span><span class="py-src-parameter">self</span><span class="py-src-op">,</span> <span class="py-src-parameter">Echo</span><span class="py-src-op">=</span><span class="py-src-number">0</span><span class="py-src-op">)</span> <span class="py-src-op">:</span><span class="py-src-newline">
</span><span class="py-src-indent">        </span><span class="py-src-variable">InputWord</span><span class="py-src-op">.</span><span class="py-src-variable">__init__</span> <span class="py-src-op">(</span><span class="py-src-variable">self</span><span class="py-src-op">,</span> <span class="py-src-variable">Echo</span><span class="py-src-op">)</span><span class="py-src-newline">
</span><span class="py-src-nl">
</span>    <span class="py-src-dedent"></span><span class="py-src-keyword">def</span> <span class="py-src-identifier">get</span> <span class="py-src-op">(</span><span class="py-src-parameter">self</span><span class="py-src-op">,</span> <span class="py-src-parameter">prompt</span><span class="py-src-op">)</span> <span class="py-src-op">:</span><span class="py-src-newline">
</span><span class="py-src-indent">        </span><span class="py-src-variable">number</span> <span class="py-src-op">=</span> <span class="py-src-variable">InputWord</span><span class="py-src-op">.</span><span class="py-src-variable">get</span><span class="py-src-op">(</span><span class="py-src-variable">self</span><span class="py-src-op">,</span><span class="py-src-variable">prompt</span><span class="py-src-op">)</span><span class="py-src-newline">
</span>        <span class="py-src-keyword">if</span> <span class="py-src-variable">number</span> <span class="py-src-op">==</span> <span class="py-src-string">&quot;&quot;</span> <span class="py-src-op">:</span> <span class="py-src-keyword">return</span> <span class="py-src-string">&quot;&quot;</span><span class="py-src-newline">
</span>        <span class="py-src-keyword">return</span> <span class="py-src-variable">string</span><span class="py-src-op">.</span><span class="py-src-variable">atoi</span><span class="py-src-op">(</span><span class="py-src-variable">number</span><span class="py-src-op">)</span><span class="py-src-newline">
</span><span class="py-src-dedent"></span><span class="py-src-dedent"></span><span class="py-src-endmarker"></span></pre></div><p><a href="../index.html">Index</a></p></body></html>